!function(i){var n={timeout:3e5,data:{},remove:function(e){delete n.data[e]},exist:function(e){return!!n.data[e]&&(new Date).getTime()-n.data[e]._<n.timeout},get:function(e){return n.data[e].data},set:function(e,t,r){n.remove(e),n.data[e]={_:(new Date).getTime(),data:t},r&&"function"==typeof r&&r(t)}};i.ajaxPrefilter(function(a,e,t){if("brainstormforce"===a.author){var o=e.complete||i.noop,s=e.url;a.beforeSend=function(){if(n.exist(s)){var e=n.get(s);return CartFlowsAPI._api_cached_request(e),!1}return!0},a.complete=function(e,t){var r={args:a.args,items:e.responseText?JSON.parse(e.responseText):"",items_count:e.getResponseHeader("x-wp-total")||0,callback:a.callback,status:t,XHR:e};n.set(s,r,o)}}}),CartFlowsAPI={_log:function(e,t){if(CartFlowsImportVars.debug&&"table"!==t)(new Date).toLocaleTimeString()},_api_url:CartFlowsImportVars.server_rest_url,_api_cached_request:function(e){CartFlowsAPI._log(n.data,"table"),CartFlowsAPI._log("Current time "+(new Date).getTime()),CartFlowsAPI._log("Cache expired in "+parseInt(n.timeout)/1e3+" seconds."),void 0!==e.args.trigger&&""!==e.args.trigger&&i(document).trigger(e.args.trigger,[e]),e.callback&&"function"==typeof e.callback&&e.callback(e)},_api_request:function(o,s){var r={url:CartFlowsAPI._api_url+o.slug,args:o,callback:s,author:"brainstormforce"};r.headers=CartFlowsImportVars.headers,i.ajax(r).done(function(e,t,r){if("success"===t&&r.getResponseHeader("x-wp-total")){var a={args:o,items:e,items_count:r.getResponseHeader("x-wp-total")||0,callback:s,status:t,XHR:r};void 0!==o.trigger&&""!==o.trigger&&i(document).trigger(o.trigger,[a])}else i(document).trigger("cartflows-api-request-error");s&&"function"==typeof s&&s(a)}).fail(function(e,t){i(document).trigger("cartflows-api-request-fail",[r,e,t])}).always(function(){i(document).trigger("cartflows-api-request-always")})}}}(jQuery);